{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 77, "column": 0}, "map": {"version":3,"sources":["file:///home/gi/Documents/1_Projects/afarsemon/afarsemon/apps/www/src/app/chat/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useChat } from \"@ai-sdk/react\";\nimport { Button } from \"@/components/ui/button\";\nimport { UserProfile } from \"@/components/auth/user-profile\";\nimport { useSession } from \"@/lib/auth-client\";\nimport { useState, type ReactNode } from \"react\";\nimport ReactMarkdown from \"react-markdown\";\nimport type { Components } from \"react-markdown\";\n\nconst H1: React.FC<React.HTMLAttributes<HTMLHeadingElement>> = (props) => (\n  <h1 className=\"mt-2 mb-3 text-2xl font-bold\" {...props} />\n);\nconst H2: React.FC<React.HTMLAttributes<HTMLHeadingElement>> = (props) => (\n  <h2 className=\"mt-2 mb-2 text-xl font-semibold\" {...props} />\n);\nconst H3: React.FC<React.HTMLAttributes<HTMLHeadingElement>> = (props) => (\n  <h3 className=\"mt-2 mb-2 text-lg font-semibold\" {...props} />\n);\nconst Paragraph: React.FC<React.HTMLAttributes<HTMLParagraphElement>> = (\n  props\n) => <p className=\"mb-3 leading-7 text-sm\" {...props} />;\nconst UL: React.FC<React.HTMLAttributes<HTMLUListElement>> = (props) => (\n  <ul className=\"mb-3 ml-5 list-disc space-y-1 text-sm\" {...props} />\n);\nconst OL: React.FC<React.OlHTMLAttributes<HTMLOListElement>> = (props) => (\n  <ol className=\"mb-3 ml-5 list-decimal space-y-1 text-sm\" {...props} />\n);\nconst LI: React.FC<React.LiHTMLAttributes<HTMLLIElement>> = (props) => (\n  <li className=\"leading-6\" {...props} />\n);\nconst Anchor: React.FC<React.AnchorHTMLAttributes<HTMLAnchorElement>> = (\n  props\n) => (\n  <a\n    className=\"underline underline-offset-2 text-primary hover:opacity-90\"\n    target=\"_blank\"\n    rel=\"noreferrer noopener\"\n    {...props}\n  />\n);\nconst Blockquote: React.FC<React.BlockquoteHTMLAttributes<HTMLElement>> = (\n  props\n) => (\n  <blockquote\n    className=\"mb-3 border-l-2 border-border pl-3 text-muted-foreground\"\n    {...props}\n  />\n);\nconst Code: Components[\"code\"] = ({ children, className, ...props }) => {\n  const match = /language-(\\w+)/.exec(className || \"\");\n  const isInline = !match;\n\n  if (isInline) {\n    return (\n      <code className=\"rounded bg-muted px-1 py-0.5 text-xs\" {...props}>\n        {children}\n      </code>\n    );\n  }\n  return (\n    <pre className=\"mb-3 w-full overflow-x-auto rounded-md bg-muted p-3\">\n      <code className=\"text-xs leading-5\" {...props}>\n        {children}\n      </code>\n    </pre>\n  );\n};\nconst HR: React.FC<React.HTMLAttributes<HTMLHRElement>> = (props) => (\n  <hr className=\"my-4 border-border\" {...props} />\n);\nconst Table: React.FC<React.TableHTMLAttributes<HTMLTableElement>> = (\n  props\n) => (\n  <div className=\"mb-3 overflow-x-auto\">\n    <table className=\"w-full border-collapse text-sm\" {...props} />\n  </div>\n);\nconst TH: React.FC<React.ThHTMLAttributes<HTMLTableCellElement>> = (props) => (\n  <th\n    className=\"border border-border bg-muted px-2 py-1 text-left\"\n    {...props}\n  />\n);\nconst TD: React.FC<React.TdHTMLAttributes<HTMLTableCellElement>> = (props) => (\n  <td className=\"border border-border px-2 py-1\" {...props} />\n);\n\nconst markdownComponents: Components = {\n  h1: H1,\n  h2: H2,\n  h3: H3,\n  p: Paragraph,\n  ul: UL,\n  ol: OL,\n  li: LI,\n  a: Anchor,\n  blockquote: Blockquote,\n  code: Code,\n  hr: HR,\n  table: Table,\n  th: TH,\n  td: TD,\n};\n\ntype TextPart = { type?: string; text?: string };\ntype MaybePartsMessage = {\n  display?: ReactNode;\n  parts?: TextPart[];\n  content?: TextPart[];\n};\n\nfunction renderMessageContent(message: MaybePartsMessage): ReactNode {\n  if (message.display) return message.display;\n  const parts = Array.isArray(message.parts)\n    ? message.parts\n    : Array.isArray(message.content)\n    ? message.content\n    : [];\n  return parts.map((p, idx) =>\n    p?.type === \"text\" && p.text ? (\n      <ReactMarkdown key={idx} components={markdownComponents}>\n        {p.text}\n      </ReactMarkdown>\n    ) : null\n  );\n}\n\nexport default function ChatPage() {\n  const { data: session, isPending } = useSession();\n  const { messages, sendMessage, status } = useChat();\n  const [input, setInput] = useState(\"\");\n\n  if (isPending) {\n    return <div className=\"container mx-auto px-4 py-12\">Loading...</div>;\n  }\n\n  if (!session) {\n    return (\n      <div className=\"container mx-auto px-4 py-12\">\n        <div className=\"max-w-3xl mx-auto\">\n          <UserProfile />\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"container mx-auto px-4 py-8\">\n      <div className=\"max-w-4xl mx-auto\">\n        <div className=\"flex justify-between items-center mb-6 pb-4 border-b\">\n          <h1 className=\"text-2xl font-bold\">AI Chat</h1>\n          <span className=\"text-sm text-muted-foreground\">\n            Welcome, {session.user.name}!\n          </span>\n        </div>\n\n        <div className=\"min-h-[50vh] overflow-y-auto space-y-4 mb-4\">\n          {messages.length === 0 && (\n            <div className=\"text-center text-muted-foreground\">\n              Start a conversation with AI\n            </div>\n          )}\n          {messages.map((message) => (\n            <div\n              key={message.id}\n              className={`p-3 rounded-lg ${\n                message.role === \"user\"\n                  ? \"bg-primary text-primary-foreground ml-auto max-w-[80%]\"\n                  : \"bg-muted max-w-[80%]\"\n              }`}\n            >\n              <div className=\"text-sm font-medium mb-1\">\n                {message.role === \"user\" ? \"You\" : \"AI\"}\n              </div>\n              <div>{renderMessageContent(message as MaybePartsMessage)}</div>\n            </div>\n          ))}\n        </div>\n\n        <form\n          onSubmit={(e) => {\n            e.preventDefault();\n            const text = input.trim();\n            if (!text) return;\n            sendMessage({ role: \"user\", parts: [{ type: \"text\", text }] });\n            setInput(\"\");\n          }}\n          className=\"flex gap-2\"\n        >\n          <input\n            value={input}\n            onChange={(e) => setInput(e.target.value)}\n            placeholder=\"Type your message...\"\n            className=\"flex-1 p-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-ring\"\n          />\n          <Button\n            type=\"submit\"\n            disabled={!input.trim() || status === \"streaming\"}\n          >\n            Send\n          </Button>\n        </form>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}